<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muchacha Grande FC - Video Poker (Compatibility Test)</title>
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1f2937">
    <meta name="description" content="Video Poker del Muchacha Grande FC - Juego de casino estilo Jacks or Better">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/escudomuchacha.png">
    <link rel="apple-touch-icon" href="assets/escudomuchacha.png">
    <link rel="shortcut icon" type="image/png" href="assets/escudomuchacha.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React Libraries - VERSI√ìN M√ÅS COMPATIBLE -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'pulse': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shimmer': 'shimmer 2s ease-in-out infinite',
                        'bounce': 'bounce 1s infinite',
                        'ping': 'ping 1s cubic-bezier(0, 0, 0.2, 1) infinite',
                        'spin': 'spin 1s linear infinite'
                    },
                    keyframes: {
                        shimmer: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(100%)' }
                        }
                    }
                }
            }
        }
    </script>

    <!-- Compatibility Check Script -->
    <script>
        // Test de compatibilidad
        window.CompatibilityTest = {
            log: function(message) {
                console.log('üîç Compatibility Test:', message);
            },
            
            checkFeatures: function() {
                var results = {};
                
                // Check React
                results.react = typeof React !== 'undefined';
                results.reactDOM = typeof ReactDOM !== 'undefined';
                
                // Check JavaScript features
                results.arrow = (function() {
                    try {
                        eval('() => {}');
                        return true;
                    } catch(e) {
                        return false;
                    }
                })();
                
                results.const = (function() {
                    try {
                        eval('const test = 1;');
                        return true;
                    } catch(e) {
                        return false;
                    }
                })();
                
                results.templateLiterals = (function() {
                    try {
                        eval('`template`');
                        return true;
                    } catch(e) {
                        return false;
                    }
                })();
                
                results.spread = (function() {
                    try {
                        eval('[...([1, 2])]');
                        return true;
                    } catch(e) {
                        return false;
                    }
                })();
                
                // Check APIs
                results.audioContext = typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined';
                results.fetch = typeof fetch !== 'undefined';
                
                this.log('Feature Support:');
                Object.keys(results).forEach(function(key) {
                    console.log('  ' + key + ':', results[key] ? '‚úÖ' : '‚ùå');
                });
                
                return results;
            },
            
            init: function() {
                this.log('Starting compatibility test...');
                var features = this.checkFeatures();
                
                // Show results in page if there are issues
                var failed = Object.keys(features).filter(function(key) {
                    return !features[key];
                });
                
                if (failed.length > 0) {
                    var container = document.getElementById('root');
                    if (container) {
                        container.innerHTML = '<div style="color: white; text-align: center; padding: 50px; font-family: Arial;">' +
                            '<h2>üîß Compatibility Issues Detected</h2>' +
                            '<p>Unsupported features: ' + failed.join(', ') + '</p>' +
                            '<p>Browser: ' + navigator.userAgent + '</p>' +
                            '</div>';
                    }
                    return false;
                }
                
                this.log('All features supported ‚úÖ');
                return true;
            }
        };
    </script>
</head>
<body class="bg-gray-900">
    <!-- Loading Screen -->
    <div id="loading" class="fixed inset-0 bg-gradient-to-br from-green-800 via-green-900 to-black flex items-center justify-center z-50">
        <div class="text-center">
            <div class="mb-6 relative">
                <div class="w-24 h-24 mx-auto relative">
                    <img 
                        src="assets/escudomuchacha.png" 
                        alt="Muchacha Grande FC" 
                        class="w-full h-full object-contain relative z-10 drop-shadow-2xl"
                    />
                </div>
            </div>
            
            <div class="text-3xl font-bold text-white mb-2">
                <span class="bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 bg-clip-text text-transparent">
                    Muchacha Grande FC
                </span>
            </div>
            
            <div class="text-lg text-blue-300 mb-6 font-semibold">
                Video Poker Profesional
            </div>
            
            <div class="text-yellow-400 font-bold text-lg">
                Iniciando prueba de compatibilidad...
            </div>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div id="root"></div>
    
    <!-- Debug Panel -->
    <div id="debug" style="position: fixed; bottom: 10px; left: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; max-width: 300px; z-index: 1000;">
        Browser: <span id="browser-info"></span><br>
        Status: <span id="load-status">Loading...</span><br>
        React: <span id="react-status">Checking...</span>
    </div>
    
    <!-- Main Script -->
    <script type="text/babel">
        // Update debug info
        document.getElementById('browser-info').textContent = navigator.userAgent.split(' ').pop();
        document.getElementById('react-status').textContent = typeof React !== 'undefined' ? '‚úÖ' : '‚ùå';
        
        // Run compatibility test first
        if (!window.CompatibilityTest.init()) {
            document.getElementById('load-status').textContent = '‚ùå Compatibility issues';
            document.getElementById('loading').style.display = 'none';
            throw new Error('Compatibility test failed');
        }
        
        document.getElementById('load-status').textContent = '‚úÖ Compatible';
        
        // Simple test component
        const TestComponent = () => {
            return React.createElement('div', {
                style: {
                    color: 'white',
                    textAlign: 'center',
                    padding: '100px 20px',
                    fontSize: '24px'
                }
            }, [
                React.createElement('h1', { key: 'title' }, 'üéâ ¬°Compatibility Test Passed!'),
                React.createElement('p', { key: 'subtitle' }, 'Your browser supports all required features'),
                React.createElement('button', {
                    key: 'button',
                    onClick: () => window.location.href = 'index.html',
                    style: {
                        background: 'linear-gradient(45deg, #10b981, #059669)',
                        color: 'white',
                        border: 'none',
                        padding: '15px 30px',
                        borderRadius: '10px',
                        fontSize: '18px',
                        fontWeight: 'bold',
                        cursor: 'pointer',
                        marginTop: '20px'
                    }
                }, 'Load Full Game')
            ]);
        };
        
        // Render with React 17 compatibility
        try {
            ReactDOM.render(
                React.createElement(TestComponent),
                document.getElementById('root')
            );
            
            document.getElementById('load-status').textContent = '‚úÖ Render OK';
            
            // Hide loading screen
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
            }, 2000);
            
        } catch (error) {
            console.error('‚ùå Render failed:', error);
            document.getElementById('load-status').textContent = '‚ùå Render failed';
            document.getElementById('root').innerHTML = '<div style="color: red; text-align: center; padding: 50px;">Render Error: ' + error.message + '</div>';
        }
    </script>
</body>
</html>